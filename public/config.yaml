openapi: 3.0.0
info:
  description: Swagger UI
  version: '1.0.0'
  title: Drivers and driving entries
tags:
- name: driving-entries
  description: Actions with driving entries
- name: drivers
  description: Actions with drivers
paths:
  /api/v1/driving-entries/:
    get:
      tags:
      - driving-entries
      summary: Info about many drivingEntry
      description: Return drivingEntry
      operationId: getDrivingEntry
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
  /api/v1/driving-entries/{id}:
    get:
      tags:
      - driving-entries
      summary: Info about one drivingEntry
      description: Return drivingEntry
      operationId: getDrivingEntry
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type : integer
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    delete:
      tags:
      - driving-entries
      summary: Delete drivingEntry
      description: Deletes drivingEntry
      operationId: deleteDrivingEntry
      parameters:
        - in: path
          name: id
          description: Id driving-entries for delete
          required: true
          schema:
            type : integer
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    put: 
      tags:
      - driving-entries
      summary: Update all fields one drivingEntry 
      description: Update drivingEntry
      operationId: ReplaceDrivingEntry
      parameters:
        - in: path
          name: id
          description: Id drivingEntry for update
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DrivingEntry'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    patch:
      tags:
      - driving-entries
      summary: Update some fields one drivingEntry
      description: Update some drivingEntry fields
      operationId: patchDrivingEntry
      parameters:
        - in: path
          name: id
          description: Id drivingEntry for update
          required: true
          schema:
            type: integer
      requestBody:
        description: drivingEntry data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDrivingEntry'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
  /api/v1/driving-entries:
    post:
      tags:
      - driving-entries
      summary: Create drivingEntry
      description: Create drivingEntry
      operationId: CreateDrivingEntry
      requestBody:
        description: drivingEntry data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DrivingEntry'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
                
  /api/v1/drivers/{id}:
    get:
      tags:
      - drivers
      summary: Info about one driver
      description: Return driver
      operationId: getDriver
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type : integer
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    delete:
      tags:
      - drivers
      summary: Delete driver
      description: Deletes driver
      operationId: deleteDriver
      parameters:
        - in: path
          name: id
          description: Id driver for delete
          required: true
          schema:
            type : integer
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    put: 
      tags:
      - drivers
      summary: Update all fields one driver 
      description: Update driver
      operationId: ReplaceDriver
      parameters:
        - in: path
          name: id
          description: Id driver for update
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Driver'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
    patch:
      tags:
      - drivers
      summary: Update some fields one driver
      description: Update some driver fields
      operationId: patchDriver
      parameters:
        - in: path
          name: id
          description: Id driver for update
          required: true
          schema:
            type: integer
      requestBody:
        description: driver data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDriver'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
  /api/v1/drivers:
    post:
      tags:
      - drivers
      summary: Create driver
      description: Creates driver
      operationId: CreateDriver
      requestBody:
        description: driver data
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Driver'
      responses:
        '200':
          description: Success!
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '400': 
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Response'       
components:
  schemas: 
    UpdateDrivingEntry:
      type: object
      allOf:
        - $ref: '#/components/schemas/DrivingEntryProperties'
    DrivingEntry:
      type: object
      allOf:
        - $ref: '#/components/schemas/DrivingEntryProperties'
        - required:
          - id
          - entry_name
          - price
          - status
          - entry_start
          - entry_end
          - student_name
    DrivingEntryProperties:
      type: object
      properties:
        id: 
          type: integer
        entry_name:
          type: string
        price:
          type: integer
        status:
          type: integer
        entry_start:
          type: string
          format: date-time
        entry_end:
          type: string
          format: date-time
        student_name:
          type: string
          nullable: true
        driver_id:
          type: integer
    UpdateDriver:
      type: object
      allOf:
        - $ref: '#/components/schemas/DriverProperties'
    Driver:
      type: object
      allOf:
        - $ref: '#/components/schemas/DriverProperties'
        - required:
          - id
          - full_name
          - car_name
          - car_type
    DriverProperties:
      type: object
      properties:
        id:
          readOnly: true 
          type: integer
        full_name:
          type: string
        car_name:
          type: string
        car_type:
          type: integer
    Response:
      type: object
      properties:
        data:
          oneOf:
            - type: object
            - type: array
              items:
                type: object
        errors:
          type: array
          items:
            type: object
            properties:
              code:
                $ref: '#/components/schemas/Code'
              message:
                type: string
              meta:
                type: object
        meta: 
          type: object
    Code:
      type: string
      enum: [200, 201 ,400, 401, 403, 404, 500]